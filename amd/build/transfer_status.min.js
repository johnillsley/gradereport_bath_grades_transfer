define(["jquery","core/templates","core/ajax","core/config"],function(a,b,c,d){var e=d.wwwroot+"/grade/report/transfer/ajax.php",f=function(b,c){var d=[b];c.users=d,console.log(c),a.ajax({type:"POST",dataType:"json",data:c,url:e}).done(function(b){a("body").css("cursor","default"),console.log(b),a.each(b,function(b,c){a.each(parent_tr_nodes,function(b,d){var e=a(d).attr("data-moodle-user-id");console.log(e),e==c.userid&&(console.log("YEs I found a target..Applying it"),a("#confirm_transfer_table tbody").find("tr[data-moodle-user-id='"+c.userid+"']").find(".transfer_status").removeClass("label-warning").addClass("label-success").html("Grade sent successfully to SAMIS"))})})})},g=function(b,c){c.preventDefault(),a(b).attr("disabled",!0),a("body").css("cursor","progress"),a("#confirm_transfer_table .transfer_status").removeClass().addClass("label label-warning transfer_status").html("");var d=(a("#confirm_transfer_table tbody tr"),{}),e=a("#transferconfirmed"),g=e.serializeArray();console.log(g);var h=[];a.each(g,function(a,b){"user[]"==b.name?h.push(b.value):d[b.name]=b.value||""}),console.log(d),a.each(h,function(a,b){f(b,d)})};return{init:function(){a(document).bind("ajaxSend",function(){a(".loadingDiv").show()}).bind("ajaxComplete",function(){a(".loadingDiv").hide()}),a("#proceed_grade_transfer").click(function(a){g(this,a)})}}});